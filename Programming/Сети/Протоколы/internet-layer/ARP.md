---
создал заметку: 2024-07-23
tags:
  - network
  - protocols
  - internetlayer
---
### Описание

**ARP (Address Resolution Protocol)** — это протокол, используемый для сопоставления [IP-адресов](../../IP-адреса.md) с MAC-адресами в локальной сети. Это необходимо, поскольку IP-адреса используются на сетевом уровне, а MAC-адреса — на канальном уровне (например, в Ethernet или Wi-Fi).

#### Основные функции ARP:
- **Определение MAC-адреса по IP-адресу**:
    - Например, команда `ping 192.168.10.43` или `ssh server.university.org` требует определения MAC-адреса для доставки пакетов по сети.
- **Работа протокола**:
    - ARP работает в режиме запрос-ответ, где одно устройство (отправитель) запрашивает MAC-адрес другого устройства, используя его IP-адрес.

#### Процесс получения MAC-адреса по IP-адресу
![](https://i.imgur.com/xJTN5uD.gif)
#### Формат ARP-запроса:

|Поле|Значение|
|---|---|
|Тип сети|1 (Ethernet)|
|Тип протокола|2048 (IPv4)|
|Длина локального адреса|6 (байт)|
|Длина глобального адреса|4 (байт)|
|Операция|1 (запрос)|
|Локальный адрес отправителя|1C:75:08:D2:49:45|
|Глобальный адрес отправителя|192.168.10.15|
|Локальный адрес получателя|00:00:00:00:00:00|
|Глобальный адрес получателя|192.168.10.43|
#### ARP-таблица

Компьютеры в сети хранят соответствие MAC- и IP-адресов в ARP-таблице (кэше), что позволяет избегать постоянных запросов ARP. Таблица обновляется по мере необходимости.

- **Команда для просмотра таблицы**: `arp -a`

Пример ARP-таблицы:

| IP-адрес      | MAC-адрес         | Тип          |
| ------------- | ----------------- | ------------ |
| 172.16.10.253 | 00:1C:C5:34:B3:01 | Динамический |
| 172.16.10.88  | 1C:75:08:D2:49:45 | Статический  |
#### Оптимизации ARP

- **Извлечение информации из ARP-запроса**:
    
    - Запросы отправляются на широковещательный адрес, и все устройства в сети могут извлечь и сохранить IP и MAC-адрес отправителя.
- **Добровольный ARP-запрос (Gratuitous ARP)**:
    
    - Устройство отправляет запрос для своего IP-адреса, чтобы уведомить другие устройства в сети о своем присутствии. Это полезно при изменении IP-адреса или предотвращении конфликта IP-адресов.

### Краткое содержание

**ARP (Address Resolution Protocol)** — протокол разрешения адресов, используемый для сопоставления [IP-адресов](../../IP-адреса.md) с MAC-адресами в локальных сетях. Это ключевой элемент, обеспечивающий работу сети на канальном уровне. ^6f6ac7